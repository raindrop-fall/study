
(function(m,i,h){if(i.ui.SmoothScroll){return}var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){window.setTimeout(r,1000/60)};var q=document.createElement("div").style;var k=(function(){var u=["t","webkitT","MozT","msT","OT"],s,t=0,r=u.length;for(;t<r;t++){s=u[t]+"ransform";if(s in q){return u[t].substr(0,u[t].length-1)}}return false})();function p(r){if(k===false){return false}if(k===""){return r}return k+r.charAt(0).toUpperCase()+r.substr(1)}var f=p("transform");var g=Date.now||function g(){return new Date().getTime()};var j=function(x,t,u,r,y,z){var s=x-t,v=Math.abs(s)/u,A,w;z=z===h?0.0006:z;A=x+(v*v)/(2*z)*(s<0?-1:1);w=v/z;if(A<r){A=y?r-(y/2.5*(v/8)):r;s=Math.abs(A-x);w=s/v}else{if(A>0){A=y?y/2.5*(v/8):0;s=Math.abs(x)+A;w=s/v}}return{destination:Math.round(A),duration:w}};var n={hasTransform:f!==false,hasPerspective:p("perspective") in q,hasTouch:"ontouchstart" in window,hasPointer:window.PointerEvent||window.MSPointerEvent,hasTransition:p("transition") in q};var o={quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(r){return Math.sqrt(1-(--r*r))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(s){var r=4;return(s=s-1)*s*((r+1)*s+r)+1}},bounce:{style:"",fn:function(r){if((r/=1)<(1/2.75)){return 7.5625*r*r}else{if(r<(2/2.75)){return 7.5625*(r-=(1.5/2.75))*r+0.75}else{if(r<(2.5/2.75)){return 7.5625*(r-=(2.25/2.75))*r+0.9375}else{return 7.5625*(r-=(2.625/2.75))*r+0.984375}}}}},elastic:{style:"",fn:function(r){var s=0.22,t=0.4;if(r===0){return 0}if(r==1){return 1}return(t*Math.pow(2,-10*r)*Math.sin((r-s/4)*(2*Math.PI)/s)+1)}}};var c={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3};function l(r){if(!r.which&&r.button){if(r.button&1){return 1}else{if(r.button&4){return 2}else{if(r.button&2){return 3}}}}return r.button}var a={transform:f,transitionTimingFunction:p("transitionTimingFunction"),transitionDuration:p("transitionDuration"),transitionDelay:p("transitionDelay"),transformOrigin:p("transformOrigin")};var b=i.ui("SmoothScroll",{bindjQuery:"smoothScroll",defaults:{startX:0,startY:0,scrollX:false,scrollY:true,directionLockThreshold:5,scrollByWheel:true,scrollType:"style",mouseWheelSpeed:20,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|SELECT)$/i},HWCompositing:true,useTransition:true,useTransform:true,resizeRefresh:false,resizePolling:60,dragable:true,snap:""},selectors:{scroller:".ui_scroller"},initialize:function(s,r){var u=this,t;if(u.supr(s,r)===false){return}if(!u.$scroller[0]){return}t=u.options;u.$wrapper=u.$el;u.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!(/Chrome\/\d/.test(window.navigator.appVersion));u.translateZ=t.HWCompositing&&n.hasPerspective?" translateZ(0)":"";t.useTransition=n.hasTransition&&t.useTransition&&t.scrollType==="style";t.useTransform=n.hasTransform&&t.useTransform;t.eventPassthrough=t.eventPassthrough===true?"vertical":t.eventPassthrough;t.preventDefault=!t.eventPassthrough&&t.preventDefault;t.scrollY=t.eventPassthrough=="vertical"?false:t.scrollY;t.scrollX=t.eventPassthrough=="horizontal"?false:t.scrollX;t.freeScroll=t.freeScroll&&!t.eventPassthrough;t.directionLockThreshold=t.eventPassthrough?0:t.directionLockThreshold;t.bounceEasing=typeof t.bounceEasing=="string"?o[t.bounceEasing]||o.circular:t.bounceEasing;t.invertWheelDirection=t.invertWheelDirection?-1:1;u._startX=0;u._startY=0;u.x=0;u.y=0;u.directionX=0;u.directionY=0;u.scrollerStyle=u.$scroller[0].style;if(t.snap){u.$snapItems=u.$(t.snap)}u._init();u.refresh();u.scrollTo(t.startX,t.startY);u.enable()},enable:function(){this.isEnabled=true},setDisabled:function(r){this.isEnabled=!r},_init:function(){this._initEvents()},_initEvents:function(){var r=this;r._handle(r.$wrapper,"mousedown");r._handle(r.$wrapper,"touchstart");r._handle(r.$wrapper,"selectstart");r._handle(r.$wrapper,"dragstart");r._handle(r.$wrapper,"click");if(r.options.useTransition){r._handle(r.$scroller,"transitionend");r._handle(r.$scroller,"webkitTransitionEnd");r._handle(r.$scroller,"oTransitionEnd");r._handle(r.$scroller,"MSTransitionEnd")}if(r.options.scrollByWheel){r._initWheel()}if(r.options.resizeRefresh){m(window).on("resize."+r.cid,function(){r.refresh()})}},_initWheel:function(){var r=this;r._handle(r.$wrapper,"wheel");r._handle(r.$wrapper,"mousewheel");r._handle(r.$wrapper,"DOMMouseScroll")},_wheel:function(w){var t=this;if(!t.isEnabled){return}w.preventDefault?w.preventDefault():w.returnValue=false;w.stopPropagation?w.stopPropagation():w.cancalBubble=true;var u,s,x,v;if(t.wheelTimeout===h){t._startX=t.x;t._startY=t.y;var r=m.Event("smoothscrollstart");t.triggerHandler(r,{x:t.x,y:t.y});if(r.isDefaultPrevented()){return}}clearTimeout(t.wheelTimeout);t.wheelTimeout=setTimeout(function(){t._triggerEnd();t.wheelTimeout=h},400);w=w.originalEvent||w;if("deltaX" in w){if(w.deltaMode===1){u=-w.deltaX*t.options.mouseWheelSpeed;s=-w.deltaY*t.options.mouseWheelSpeed}else{u=-w.deltaX;s=-w.deltaY}}else{if("wheelDeltaX" in w){u=w.wheelDeltaX/120*t.options.mouseWheelSpeed;s=w.wheelDeltaY/120*t.options.mouseWheelSpeed}else{if("wheelDelta" in w){u=s=w.wheelDelta/120*t.options.mouseWheelSpeed}else{if("detail" in w){u=s=-w.detail/3*t.options.mouseWheelSpeed}else{return}}}}u*=t.options.invertWheelDirection;s*=t.options.invertWheelDirection;if(!t.hasVerticalScroll){u=s;s=0}x=t.x+Math.round(t.hasHorizontalScroll?u:0);v=t.y+Math.round(t.hasVerticalScroll?s:0);if(x>0){x=0}else{if(x<t.maxScrollX){x=t.maxScrollX}}if(v>0){v=0}else{if(v<t.maxScrollY){v=t.maxScrollY}}t.scrollTo(x,v,0)},_handle:function(t,s,r){var u=this;if(r!==false){t.on(s+"."+u.cid,u.handleEvent.bind(u))}else{t.off(s+"."+u.cid)}},handleEvent:function(s){var r=this;switch(s.type){case"mousedown":case"touchstart":if(r.moved){s.preventDefault()}r._start(s);break;case"selectstart":case"dragstart":s.preventDefault?s.preventDefault:s.returnValue=false;break;case"mousemove":case"touchmove":r._move(s);break;case"mouseup":case"mousecancel":case"touchend":case"touchcancel":r._end(s);break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":r._transitionEnd(s);break;case"wheel":case"mousewheel":case"DOMMouseScroll":r._wheel(s);break;case"click":if(r.moved){s.preventDefault();s.stopPropagation()}else{r._click(s)}break}},getPosition:function(){var r,t;if(this.options.scrollType==="style"){var s=i.dom.position(this.$scroller);r=s.x;t=s.y}else{if(this.options.scrollType==="scroll"){r=-this.$scroller.parent().scrollLeft();t=-this.$scroller.parent().scrollTop()}}return{x:r,y:t}},_animate:function(A,z,u,r){var y=this,w=this.x,v=this.y,s=g(),x=s+u;function t(){var B=g(),D,C,E;if(B>=x){y.isAnimating=false;y._translate(A,z);if(y.options.bounce&&!y.resetPosition(y.options.bounceTime)){y._triggerEnd()}return}B=(B-s)/u;E=r(B);D=(A-w)*E+w;C=(z-v)*E+v;D=isNaN(D)?0:D;C=isNaN(C)?0:C;y._translate(D,C);if(y.isAnimating){d(t)}}this.isAnimating=true;t()},_transitionTime:function(r){if(!this.options.useTransition){return}r=r||0;this.scrollerStyle[a.transitionDuration]=r+"ms"},_transitionTimingFunction:function(r){if(!this.options.useTransition){return}this.scrollerStyle[a.transitionTimingFunction]=r},_translate:function(r,u){var t=this;var s=m.Event("smoothscrollmove");t.triggerHandler(s,{x:r,y:u});if(s.isDefaultPrevented()){return}if(t.options.scrollType==="style"){if(t.options.useTransform){t.scrollerStyle[a.transform]="translate("+r+"px,"+u+"px)"+t.translateZ}else{r=Math.round(r);u=Math.round(u);t.scrollerStyle.left=r+"px";t.scrollerStyle.top=u+"px"}}else{if(t.options.scrollType==="scroll"){t.$scroller.parent().scrollLeft(-r);t.$scroller.parent().scrollTop(-u)}}t.scrollSizeX=t.x-r;t.scrollSizeY=t.y-u;t.x=r;t.y=u},resetPosition:function(t){var s=this,r=s.x,u=s.y;t=t||0;if(!s.hasHorizontalScroll||s.x>0){r=0}else{if(s.x<s.maxScrollX){r=s.maxScrollX}}if(!s.hasVerticalScroll||s.y>0){u=0}else{if(s.y<s.maxScrollY){u=s.maxScrollY}}if(r==s.x&&u==s.y){return false}s.scrollTo(r,u,t,s.options.bounceEasing);return true},scrollPrev:function(s,u,w){var t=this,r=0,v=0;if(s==="x"){r=Math.min(0,t.x+t.wrapperWidth)}else{v=Math.min(0,t.y+t.wrapperHeight)}t.scrollTo(r,v,u,w)},scrollNext:function(s,u,w){var t=this,r=0,v=0;if(s==="x"){r=Math.max(t.maxScrollX,t.x-t.wrapperWidth)}else{v=Math.max(t.maxScrollY,t.y-t.wrapperHeight)}t.scrollTo(r,v,u,w)},scrollTo:function(r,v,t,u){var s=this;u=u||o.circular;if(typeof r==="string"){if(/^-=/.test(r)){r=s.x-parseInt(r.substr(2),10)}else{if(/^\+=/.test(r)){r=s.x+parseInt(r.substr(2))}}}if(typeof v==="string"){if(/^-=/.test(v)){v=s.y-parseInt(v.substr(2),10)}else{if(/^\+=/.test(v)){v=s.y+parseInt(v.substr(2),10)}}}if(!s.options.momentum){r=Math.max(s.maxScrollX,Math.min(r,0));v=Math.max(s.maxScrollY,Math.min(v,0))}s.isInTransition=s.options.useTransition&&t>0;if(!t||(s.options.useTransition&&u.style)){s._transitionTimingFunction(u.style);s._transitionTime(t);s._translate(r,v)}else{s._animate(r,v,t,u.fn)}},scrollToElement:function(s,u,r,x,w){var t=this;s=s.nodeType?s:t.$scroller.find(s);if(!s){return}var v=m(s).position();v.left*=-1;v.top*=-1;v.left=v.left>0?0:v.left<t.maxScrollX?t.maxScrollX:v.left;v.top=v.top>0?0:v.top<t.maxScrollY?t.maxScrollY:v.top;u=u===h||u===null||u==="auto"?Math.max(Math.abs(t.x-v.left),Math.abs(t.y-v.top)):u;t.scrollTo(v.left,v.top,u,w)},_isDragable:function(r){if(i.browser.isTouch){return true}if(r&&r.tagName&&this.options.preventDefaultException.tagName.test(r.tagName)){return false}else{return true}},_click:function(t){var s=this,r=i.dom.getEventPoint(t);if(!(s.downX===r.x&&s.downY===r.y)){t.preventDefault?t.preventDefault():t.returnValue=false;t.stopPropagation?t.stopPropagation():t.cancalBubble=true}},_start:function(t){var s=this;var u=t.originalEvent||t;if(c[u.type]!=1){if(i.dom.getMouseButton(u)!=="left"){return}}if((!s.isEnabled||(s.initiated&&c[u.type]!==s.initiated))&&!m(t.target).hasClass("input_del")){return}var w=m(document),r=i.dom.getEventPoint(u),v;if(!s._isDragable(t.target)||!s.options.dragable){return}s._handle(w,"mousemove");s._handle(w,"touchmove");s._handle(w,"touchend");s._handle(w,"mouseup");s._handle(w,"mousecancel");s._handle(w,"tocuchcancel");s.initiated=c[u.type];s.moved=false;s.distX=0;s.distY=0;s.directionX=0;s.directionY=0;s.directionLocked=0;s._transitionTime();s.startTime=g();if(s.options.useTransition&&s.isInTransition){s.isInTransition=false;v=s.getPosition();s._translate(Math.round(v.x),Math.round(v.y));s._triggerEnd()}else{if(!s.options.useTransition&&s.isAnimating){s.isAnimating=false;s._triggerEnd()}}s.startX=s.x;s.startY=s.y;s.absStartX=s.x;s.absStartY=s.y;s.pointX=s.downX=r.x;s.pointY=s.downY=r.y},_move:function(w){var y=this;w=w.originalEvent||w;if(!y.isEnabled||c[w.type]!==y.initiated){return}if(y.options.preventDefault){w.preventDefault?w.preventDefault():w.defaultValue=false}var A=i.dom.getEventPoint(w),t=A.x-y.pointX,s=A.y-y.pointY,x=g(),r,B,v,u;y.pointX=A.x;y.pointY=A.y;y.distX+=t;y.distY+=s;v=Math.abs(y.distX);u=Math.abs(y.distY);if(x-y.endTime>300&&(v<10&&u<10)){return}if(!y.directionLocked&&!y.options.freeScroll){if(v>u+y.options.directionLockThreshold){y.directionLocked="h"}else{if(u>=v+y.options.directionLockThreshold){y.directionLocked="v"}else{y.directionLocked="n"}}}if(y.directionLocked=="h"){if(y.options.eventPassthrough=="vertical"){w.preventDefault?w.preventDefault():w.defaultValue=false}else{if(y.options.eventPassthrough=="horizontal"){y.initiated=false;return}}s=0}else{if(y.directionLocked=="v"){if(y.options.eventPassthrough=="horizontal"){w.preventDefault?w.preventDefault():w.defaultValue=false}else{if(y.options.eventPassthrough=="vertical"){y.initiated=false;return}}t=0}}t=y.hasHorizontalScroll?t:0;s=y.hasVerticalScroll?s:0;r=y.x+t;B=y.y+s;if(r>0||r<y.maxScrollX){r=y.options.bounce?y.x+t/3:r>0?0:y.maxScrollX}if(B>0||B<y.maxScrollY){B=y.options.bounce?y.y+s/3:B>0?0:y.maxScrollY}y.directionX=t>0?-1:t<0?1:0;y.directionY=s>0?-1:s<0?1:0;if(!y.moved){y._startX=y.x;y._startY=y.y;var z=m.Event("smoothscrollstart");y.triggerHandler(z,{x:y.x,y:y.y});if(z.isDefaultPrevented()){return}}y.moved=true;y._translate(r,B);if(x-y.startTime>300){y.startTime=x;y.startX=y.x;y.startY=y.y}},_end:function(x){var z=this;if(!z.isEnabled||c[x.type]!==z.initiated){return}var w=m(document),t,s,v=g()-z.startTime,r=Math.round(z.x),A=Math.round(z.y),u=0,y="";w.off("."+z.cid);z.isInTransition=0;z.initiated=0;z.endTime=g();if(z.options.bounce&&z.resetPosition(z.options.bounceTime)){return}z.scrollTo(r,A);if(!z.moved){return}if(z.options.momentum&&v<300){t=z.hasHorizontalScroll?j(z.x,z.startX,v,z.maxScrollX,z.options.bounce?z.wrapperWidth:0,z.options.deceleration):{destination:r,duration:0};s=z.hasVerticalScroll?j(z.y,z.startY,v,z.maxScrollY,z.options.bounce?z.wrapperHeight:0,z.options.deceleration):{destination:A,duration:0};r=t.destination;A=s.destination;u=Math.max(t.duration,s.duration);z.isInTransition=1}if(r!=z.x||A!=z.y){if(r>0||r<z.maxScrollX||A>0||A<z.maxScrollY){y=o.quadratic}z.scrollTo(r,A,u,y);return}z._triggerEnd()},refresh:function(){var r=this;r.wrapperWidth=r.options.getWrapperWidth?r.options.getWrapperWidth():r.$wrapper.width();r.wrapperHeight=r.options.getWrapperHeight?r.options.getWrapperHeight():r.$wrapper.height();r.scrollerWidth=r.options.getScrollerWidth?r.options.getScrollerWidth():r.$scroller.width();r.scrollerHeight=r.options.getScrollerHeight?r.options.getScrollerHeight():r.$scroller.height();r.maxScrollX=r.wrapperWidth-r.scrollerWidth;r.maxScrollY=r.wrapperHeight-r.scrollerHeight;r.hasHorizontalScroll=r.options.scrollX&&r.maxScrollX<0;r.hasVerticalScroll=r.options.scrollY&&r.maxScrollY<0;if(!r.hasHorizontalScroll){r.maxScrollX=0;r.scrollerWidth=r.wrapperWidth}if(!r.hasVerticalScroll){r.maxScrollY=0;r.scrollerHeight=r.wrapperHeight}r.endTime=0;r.directionX=0;r.directionY=0;r.resetPosition();r.options.snap&&r._refreshSnapPos()},_refreshSnapPos:function(){var r=this;if(!r.options.snap){return}r.snapItemsPos=[];r.$snapItems.each(function(){r.snapItemsPos.push(m(this).position())})},_transitionEnd:function(s){var r=this;if(s.target!=r.$scroller[0]||!r.isInTransition){return}r._transitionTime();if(r.options.bounce&&!r.resetPosition(r.options.bounceTime)){r.isInTransition=false;this._triggerEnd()}},_snap:function(){var s=this;if(!s.options.snap){return}if(s._isSnap){s._isSnap=false}else{if(s.maxScrollX!=s.x){var r=s._startX-s.x,u=0,t=false;s._isSnap=true;r&&i.each(s.snapItemsPos,function(v){var w=v.left;if(r>0){if(w>Math.abs(s.x)){t=true;s._animate(-w,0,200,o.circular.fn);return false}}else{if(r<0){if(w>Math.abs(s.x)){t=true;s._animate(-u,0,200,o.circular.fn);return false}}}u=w});if(t){return true}}}s._isSnap=false},_triggerEnd:function(){var r=this;r.moved=false;if(r.options.snap&&r._snap()===true){return}r.triggerHandler("smoothscrollend",{x:r.x,y:r.y,dir:{x:r._startX-r.x,y:r._startY-r.y},wrapWidth:r.wrapperWidth,wrapHeight:r.wrapperHeight,scrollWidth:r.scrollerWidth,scrollHeight:r.scrollerHeight})},getCurrentX:function(){return this.x},getCurrentY:function(){return this.y},getMaxScrollX:function(){return this.maxScrollX},getMaxScrollY:function(){return this.maxScrollY}});if(typeof define==="function"&&define.amd){define([],function(){return b})}i.importJs.define("smooth-scroll",b)})(jQuery,window[LIB_NAME]);
