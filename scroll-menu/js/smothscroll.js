;window.LIB_NAME="scui";window.LIB_DIV_DEBUG=false;window.IS_DEBUG=location.href.indexOf("jsdebug=true")>=0;window.IS_APP=location.href.indexOf("app=true")>=0;(function($){var LIB_NAME=window.LIB_NAME||"scui";if(window[LIB_NAME]){return}if(!$){throw new Error("This library requires jQuery")}var context=window,$root=$(document.documentElement).addClass("js"),tmpInput=document.createElement("input"),isTouch=("ontouchstart" in context),isMobile=("orientation" in context)||isTouch||window.IS_MOBILE===true,supportPlaceholder=("placeholder" in tmpInput);isTouch&&$root.addClass("touch");isMobile&&$root.addClass("mobile");if(typeof Function.prototype.bind==="undefined"){Function.prototype.bind=function(){var fn=this,args=arraySlice.call(arguments),object=args.shift();return function(context){var local_args=args.concat(arraySlice.call(arguments));if(this!==window){local_args.push(this)}return fn.apply(object,local_args)}}}if(!window.console){window.console={};if(window.LIB_DIV_DEBUG===true){window.$debugDiv=$('<div class="ui_debug" style=""></div>');$(function(){window.$debugDiv.appendTo("body")})}var consoleMethods=["log","info","warn","error","assert","dir","clear","profile","profileEnd","trace"];for(var i=-1,method;method=consoleMethods[++i];){+function(method){console[method]=window.LIB_DIV_DEBUG===true?function(){window.$debugDiv.append('<div style="font-size:9pt;">&gt; <span>['+method+"]</span> "+[].slice.call(arguments).join(", ")+"</div>")}:function(){}}(method)}}var oldOff=$.fn.off;$.fn.unbind=$.fn.off=function(name){try{if((this[0]===window||this[0]===document)&&name!=="ready"&&name.indexOf(".")<0){throw new Error("["+name+"] window, document에서 이벤트를 off할 때는 네임스페이스를 꼭 넣어주셔야 합니다.")}}catch(err){console.log("["+name+"] window, document에서 이벤트를 off할 때는 네임스페이스를 꼭 넣어주셔야 합니다.")}if(IS_DEBUG){console.log("off",name);console.trace()}return oldOff.apply(this,arguments)};if(IS_DEBUG){var oldOn=$.fn.on;$.fn.on=function(name){if(this[0]===window||this[0]===document){console.log("on",name);console.trace()}return oldOn.apply(this,arguments)}}if(IS_APP){$(".banner_star").remove();$(".btn_talk_area").remove();$(".common_menu").remove();$("header").remove();$("footer").remove();$("#contents").css("paddingTop",0)}$.fn.encodeURI=function(value){if(arguments.length===0){return encodeURIComponent($.trim(this.val()))}else{return this.val(encodeURIComponent(value))}};$.fn.toggleLayer=function(){return this.each(function(){var $el=$(this),$target=$($el.attr("data-target")||$el.attr("href"));$el.on("click",function(e){e.preventDefault();$target.toggle(!$target.is(":visible"))})})};$.extend(jQuery.expr[":"],{focusable:function(el,index,selector){return $(el).is("a, button, input[type=password], input[type=text], input[type=file], input[type=checkbox], input[type=radio], select, textarea, [tabindex]")}});$.fn.onImgLoaded=function(cb){core.util.waitImageLoad(this).done(cb);return this};$.fn.getImgSize=function(cb){var $img=this.eq(0);$img.imgLoaded(function(){cb&&cb.call($img[0],$img.css("width","").width(),$img.css("height","").height())});return this};$.fn.replaceClass=function(old,newCls){return this.each(function(){$(this).removeClass(old).addClass(newCls)})};$.fn.showLayer=function(options,isTrigger){options=extend({onShow:core.emptyFn,opener:null},options);return this.each(function(){var $this=$(this),evt;if(options.opener){$this.data("opener",options.opener);$(options.opener).attr({"aria-pressed":"true","aria-expand":"true"})}if(isTrigger!==false){$this.trigger(evt=$.Event($.fn.showLayer.ON_BEFORESHOW));if(evt.isDefaultPrevented()){return}}$this.addClass($.fn.showLayer.openClass).show()[trigger]($.fn.showLayer.ON_SHOWN);options.onShow.call($this[0])})};$.fn.showLayer.openClass="ui_open";$.fn.showLayer.ON_BEFORESHOW="layerbeforeshow";$.fn.showLayer.ON_SHOWN="layershown";$.fn.hideLayer=function(options,isTrigger){options=extend({onHide:core.emptyFn,focusOpener:false},options);return this.each(function(){var $this=$(this);$this.removeClass($.fn.showLayer.openClass).hide();if(isTrigger!==false){$this.trigger($.fn.hideLayer.ON_HIDDEN)}options.onHide.call($this[0]);if($this.data("opener")){var $btn=$($this.data("opener"));$this.removeData("opener");$btn.attr({"aria-pressed":"false","aria-expand":"false"});if(options.focusOpener===true){$btn.focus()}}})};$.fn.hideLayer.ON_HIDDEN="layerhidden";$.fn.noop=function(){return this};$.fn.checkedValues=function(){var results=[];this.each(function(){if((this.type==="checkbox"||this.type==="radio")&&!this.disabled&&this.checked===true){results.push(this.value)}});return results};$.fn.activeItem=function(cls,isReverse){cls=cls||"on";return this.toggleClass(cls,!isReverse).siblings().toggleClass(cls,isReverse).end()};$.fn.appendAndFocus=function(html,element){var $tmp=$("<div>"),$html=$tmp.empty().append(html),$focus=($(element).size()===0)?$html.find("*:eq(0)").attr("tabindex",-1):$(element).find(":focusable").eq(0);this.append($html.children());$focus.size()&&$focus.focus();$tmp=null;return this};$.fn.htmlAndFocus=function(html,opts){var me=this;me.html(html);if(typeof(opts)=="undefined"){var opts={notFocus:false}}if(opts.notFocus!==true){setTimeout(function(){try{window[LIB_NAME].util.scrollToElement(me,{offset:me.offset().top+parseInt(me.css("marginTop"),10),complete:function(){me.attr("tabindex",-1).focus()}})}catch(err){console.log("window[LIB_NAME].util.scrollToElement",window[LIB_NAME].util.scrollToElement)}},50)}return me};$.fn.activeOne=function(index,cls,isReverse){cls=cls||"on";return this.removeClass(cls,!isReverse).eq(index).addClass(cls,isReverse).end()};var core=context[LIB_NAME]||(context[LIB_NAME]={});var doc=document,arrayProto=Array.prototype,objectProto=Object.prototype,toString=objectProto.toString,hasOwn=objectProto.hasOwnProperty,arraySlice=arrayProto.slice,isPlainObject=(toString.call(null)==="[object Object]")?function(value){return value!==null&&value!==undefined&&toString.call(value)==="[object Object]"&&value.ownerDocument===undefined}:function(value){return toString.call(value)==="[object Object]"},isType=function(value,typeName){var isGet=arguments.length===1;function result(name){return isGet?name:typeName===name}if(value===null){return result("null")}if(value&&value.nodeType){if(value.nodeType===1||value.nodeType===9){return result("element")}else{if(value&&value.nodeType===3&&value.nodeName==="#text"){return result("textnode")}}}if(typeName==="object"||typeName==="json"){return isGet?"object":isPlainObject(value)}var s=toString.call(value),type=s.match(/\[object (.*?)\]/)[1].toLowerCase();if(type==="number"){if(isNaN(value)){return result("nan")}if(!isFinite(value)){return result("infinity")}return result("number")}return isGet?type:type===typeName},isArray=function(obj){return isType(obj,"array")},isFunction=function(obj){return isType(obj,"function")},each=function(obj,iterater,ctx){if(!obj){return obj}var i=0,len=0,isArr=isArray(obj);if(isArr){for(i=0,len=obj.length;i<len;i++){if(iterater.call(ctx||obj,obj[i],i,obj)===false){break}}}else{for(i in obj){if(hasOwn.call(obj,i)){if(iterater.call(ctx||obj,obj[i],i,obj)===false){break}}}}return obj},eachReverse=function(obj,iterater,ctx){if(!obj){return obj}var i=0,len=0,isArr=isArray(obj);if(isArr){for(i=obj.length-1;i>=0;i--){if(iterater.call(ctx||obj,obj[i],i,obj)===false){break}}}else{throw new Error("eachReverse 함수는 배열에만 사용할 수 있습니다.")}return obj},extend=function(deep,obj){var args;if(deep===true){args=arraySlice.call(arguments,2)}else{args=arraySlice.call(arguments,1);obj=deep;deep=false}each(args,function(source){if(!source){return}each(source,function(val,key){var isArr=isArray(val);if(deep&&(isArr||isPlainObject(val))){obj[key]||(obj[key]=isArr?[]:{});obj[key]=extend(deep,obj[key],val)}else{obj[key]=val}})});return obj},clone=function(obj){if(null==obj||"object"!=typeof obj){return obj}if(obj instanceof Date){var copy=new Date();copy.setTime(obj.getTime());return copy}if(obj instanceof Array){var copy=[];for(var i=0,len=obj.length;i<len;i++){copy[i]=clone(obj[i])}return copy}if(obj instanceof Object){var copy={};for(var attr in obj){if(obj.hasOwnProperty(attr)){copy[attr]=clone(obj[attr])}}return copy}throw new Error("oops!! clone is fail")};extend(core,{name:LIB_NAME,debug:false,each:each,eachReverse:eachReverse,extend:extend,clone:clone,emptyFn:function(){},tmpInput:tmpInput,tmpNode:doc.createElement("div"),is:isType,type:isType,isEmpty:function(value,allowEmptyString){return(value===null)||(value===undefined)||(value===0)||(core.is(value,"string")&&!allowEmptyString?value==="":false)||(core.is(value,"array")&&value.length===0)||(core.is(value,"object")&&!core.object.hasItems(value))},hasOwn:function(obj,name){return hasOwn.call(obj,name)},namespace:function(name,obj){if(typeof name!=="string"){obj&&(name=obj);return name}var root=context,names=name.split("."),i,item;for(i=-1;item=names[++i];){root=root[item]||(root[item]={})}return extend(root,obj||{})},addon:function(name,object,isExecFn){if(typeof name!=="string"){object=name;name=""}var root=core,names=name?name.replace(/^_core\.?/,"").split("."):[],ln=names.length-1,leaf=names[ln];if(isExecFn!==false&&typeof object==="function"&&!hasOwn.call(object,"superclass")){object=object.call(root)}for(var i=0;i<ln;i++){root=root[names[i]]||(root[names[i]]={})}return(leaf&&(root[leaf]?extend(root[leaf],object):(root[leaf]=object)))||extend(root,object),object}});core.ns=core.namespace;extend(core,{timeStart:function(name,reset){if(!name){return}var time=+new Date,key="KEY"+name.toString();this.timeCounters||(this.timeCounters={});if(!reset&&this.timeCounters[key]){return}this.timeCounters[key]=time},timeEnd:function(name){if(!this.timeCounters){return null}var time=+new Date,key="KEY"+name.toString(),timeCounter=this.timeCounters[key],diff;if(timeCounter){diff=time-timeCounter;console.log("["+name+"] "+diff+"ms");delete this.timeCounters[key]}return diff}});core.addon("number",{zeroPad:function(value,size,ch){var sign=value<0?"-":"",result=String(Math.abs(value));ch||(ch="0");size||(size=2);if(result.length>=size){return sign+result.slice(-size)}while(result.length<size){result=ch+result}return sign+result},addComma:(function(){var regComma=/(\d+)(\d{3})/;return function(value){value+="";var x=value.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";while(regComma.test(x1)){x1=x1.replace(regComma,"$1,$2")}return x1+x2}})(),random:function(min,max){if(!max){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))},limit:function(value,min,max){if(value<min){return min}else{if(value>max){return max}}return value},parse:function(value){value=(value||"").toString().replace(/[^-0-9\.]+$/,"");value=value*1;return isNaN(value)?0:value},toBinary:function(d,bits){var b=[];if(!bits){bits=8}while(d>0){b.unshift(d%2);d>>=1}if(bits){while(b.length<bits){b.unshift(0)}}return b.join("")},fromBinary:function(b){var ba=(b||"").split(""),n=1,r=0;for(var i in ba){r+=n*ba[i];n*=2}return r},toKorean:function(num){var nums,sign,kor,unit,unit2,c,c2,result,ch;if(num==null){return""}num=num+"";if(num=="0"){return"영"}if(num.substr(0,1)=="-"){sign="마이너스 ";num=num.substr(1)}nums=num.split("");sign="";kor=["","일","이","삼","사","오","육","칠","팔","구"];unit=["","십","백","천"];unit2=["","만","억","조","경","해"];c=0;c2=0;result="";ch="";for(var i=nums.length-1;i>=0;i--,c++){if(c>0&&c%4===0){c2++}if(!(ch=kor[nums[i]])){continue}if(c%4===0){result=unit2[c2]+result;if(ch==="일"&&(i===0&&c2<=1)){ch=""}}else{if(ch==="일"){ch=""}}if(ch+=unit[c%4]){result=ch+result}}return sign+result}});core.number.pad=core.number.zeroPad;core.comma=core.number.addComma;core.addon("string",function(){var escapeChars={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"},unescapeChars=(function(escapeChars){var results={};each(escapeChars,function(v,k){results[v]=k});return results})(escapeChars),escapeRegexp=/[&><'"]/g,unescapeRegexp=/\&[^;]+;/g,tagRegexp=/<\/?[^>]+>/gi,scriptRegexp=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/ig,hexRegexp=/^\&#x([\da-fA-F]+);$/;return{trim:function(value){return value?value.replace(/^\s+|\s+$/g,""):value},replaceAll:function(value,find,rep){if(find.constructor===RegExp){return value.replace(new RegExp(find.toString().replace(/^\/|\/$/gi,""),"gi"),rep)}return value.split(find).join(rep)},byteLength:function(value){if(!value){return 0}return encodeURIComponent(value).replace(/%[A-F\d]{2}/g,"U").length},getFileExt:function(fname){fname||(fname="");return fname.substr((~-fname.lastIndexOf(".")>>>0)+2)},getFileName:function(str){var paths=str.split(/\/|\\/g);return paths[paths.length-1]},cut:function(value,length,truncation){var str=value;truncation||(truncation="");if(str.length>length){return str.substring(0,length)+truncation}return str},cutByByte:function(value,length,truncation){var str=value,chars=this.indexByByte(value,length);truncation||(truncation="");if(str.length>chars){return str.substring(0,chars)+truncation}return str},indexByByte:function(value,length){var len,i,c;if(typeof value!=="string"){return 0}for(len=i=0;c=value.charCodeAt(i++);){len+=c>>11?3:c>>7?2:1;if(len>length){return i>0?i-1:0}}return i},capitalize:function(value){return value?value.charAt(0).toUpperCase()+value.substring(1):value},camelize:function(value){return value?value.replace(/(\-|_|\s)+(.)?/g,function(a,b,c){return(c?c.toUpperCase():"")}):value},dasherize:function(value){return value?value.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase():value},toFirstLower:function(value){return value?value.replace(/^[A-Z]/,function(s){return s.toLowerCase()}):value},repeat:function(value,cnt,sep){sep||(sep="");var result=[];for(var i=0;i<cnt;i++){result.push(value)}return result.join(sep)},escapeHTML:function(value){return value?(value+"").replace(escapeRegexp,function(m){return escapeChars[m]}):value},unescapeHTML:(function(){return function(value){var temp=document.createElement("div");temp.innerHTML=value;var result="";for(var i=-1,item;item=temp.childNodes[++i];){result+=item.nodeValue}temp=null;return result}})(),toggle:function(value,these,other){return these===value?other:value},format:function(format,val){var args=core.toArray(arguments).slice(1),isJson=core.is(val,"object");return format.replace(/\{([0-9a-z_]+)\}/ig,function(m,i){return isJson?val[i]:args[i]||""})},toEntities:function(value){var buffer=[];for(var i=0,len=value.length;i<len;i++){buffer.push("&#",value.charCodeAt(i).toString(),";")}return buffer.join("")},random:function(len){var keystr="",x;for(var i=0;i<len;i++){x=Math.floor((Math.random()*36));if(x<10){keystr+=String(x)}else{keystr+=String.fromCharCode(x+87)}}return keystr},stripTags:function(value){return(value||"").toString().replace(tagRegexp,"")},stripScripts:function(value){return(value||"").toString().replace(scriptRegexp,"")},sprintf:(function(){var re=/%%|%(?:(\d+)[\$#])?([+-])?('.|0| )?(\d*)(?:\.(\d+))?([bcdfosuxXhH])/g,core=core;var s=function(){var args=[].slice.call(arguments,1);var val=arguments[0];var index=0;var x;var ins;return val.replace(re,function(){if(arguments[0]=="%%"){return"%"}x=[];for(var i=0;i<arguments.length;i++){x[i]=arguments[i]||""}x[3]=x[3].slice(-1)||" ";ins=args[+x[1]?x[1]-1:index++];return s[x[6]](ins,x)})};var pad=function(value,size,ch){var sign=value<0?"-":"",result=String(Math.abs(value));ch||(ch="0");size||(size=2);if(result.length>=size){return sign+result.slice(-size)}while(result.length<size){result=ch+result}return sign+result};s.d=s.u=function(ins,x){return pad(Number(ins).toString(10),x[2]+x[4],x[3])};s.f=function(ins,x){var ins=Number(ins);if(x[5]){ins=ins.toFixed(x[5])}else{if(x[4]){ins=ins.toExponential(x[4])}else{ins=ins.toExponential()}}x[2]=x[2]=="-"?"+":"-";return pad(ins,x[2]+x[4],x[3])};s.s=function(ins,x){return pad(ins,x[2]+x[4],x[3])};return s})()}});core.addon("object",{keys:Object.keys||function(obj){var results=[];each(obj,function(v,k){results.push(k)});return results},values:Object.values||function(obj){var results=[];each(obj,function(v){results.push(v)});return results},map:function(obj,cb){if(!core.is(obj,"object")||!core.is(cb,"function")){return obj}var results={};each(obj,function(v,k){results[k]=cb(obj[k],k,obj)});return results},hasItems:function(obj){if(!core.is(obj,"object")){return false}var has=false;each(obj,function(v){return has=true,false});return has},toQueryString:function(params,isEncode){if(typeof params==="string"){return params}var queryString="",encode=isEncode===false?function(v){return v}:encodeURIComponent;each(params,function(value,key){if(typeof(value)==="object"){each(value,function(innerValue,innerKey){if(queryString!==""){queryString+="&"}queryString+=encode(key)+"["+encode(innerKey)+"]="+encode(innerValue)})}else{if(typeof(value)!=="undefined"){if(queryString!==""){queryString+="&"}queryString+=encode(key)+"="+encode(value)}}});return queryString},traverse:function(obj){var result={};each(obj,function(item,index){result[item]=index});return result},remove:function(value,key){if(!core.is(value,"object")){return value}value[key]=null;delete value[key];return value},stringify:window.JSON?JSON.stringify:function(val,opts,pad){var cache=[];return(function stringify(val,opts,pad){var objKeys;opts=$.extend({},{singleQuotes:false,indent:"",nr:""},opts);pad=pad||"";if(typeof val==="number"||typeof val==="boolean"||val===null||val===undefined){return val}if(typeof val==="string"){return'"'+val+'"'}if(val instanceof Date){return"new Date('"+val.toISOString()+"')"}if($.isArray(val)){if(core.isEmpty(val)){return"[]"}return"["+opts.nr+core.array.map(val,function(el,i){var eol=val.length-1===i?opts.nr:", "+opts.nr;return pad+opts.indent+stringify(el,opts,pad+opts.indent)+eol}).join("")+pad+"]"}if(core.isPlainObject(val)){if(core.array.indexOf(cache,val)!==-1){return null}if(core.isEmpty(val)){return"{}"}cache.push(val);objKeys=core.object.keys(val);return"{"+opts.nr+core.array.map(objKeys,function(el,i){var eol=objKeys.length-1===i?opts.nr:", "+opts.nr;var key=/^[^a-z_]|\W+/ig.test(el)&&el[0]!=="$"?stringify(el,opts):el;return pad+opts.indent+'"'+key+'": '+stringify(val[el],opts,pad+opts.indent)+eol}).join("")+pad+"}"}if(opts.singleQuotes===false){return'"'+(val+"").replace(/"/g,'\\"')+'"'}else{return"'"+(val+"").replace(/'/g,"\\'")+"'"}})(val,opts,pad)}});core.object.has=core.object.hasItems;core.json=core.object;var arrayProto=Array.prototype;function nativeCall(f){return f?function(obj){return f.apply(obj,arraySlice.call(arguments,1))}:false}core.addon("array",{append:function(arr){var args=arraySlice.call(arguments);return Array.prototype.concat.apply([],args)},map:nativeCall(arrayProto.map)||function(obj,cb,ctx){var results=[];if(!core.is(obj,"array")||!core.is(cb,"function")){return results}for(var i=0,len=obj.length;i<len;i++){results[results.length]=cb.call(ctx||obj,obj[i],i,obj)}return results},every:nativeCall(arrayProto.every)||function(arr,cb,ctx){var isTrue=true;if(!core.is(arr,"array")||!core.is(cb,"function")){return isTrue}each(arr,function(v,k){if(cb.call(ctx||this,v,k)!==true){return isTrue=false,false}});return isTrue},any:nativeCall(arrayProto.any)||function(arr,cb,ctx){var isTrue=false;if(!core.is(arr,"array")||!core.is(cb,"function")){return isTrue}each(arr,function(v,k){if(cb.call(ctx||this,v,k)===true){return isTrue=true,false}});return isTrue},shuffle:function(obj){var rand,index=0,shuffled=[],number=core.number;each(obj,function(value){rand=number.random(index++);shuffled[index-1]=shuffled[rand],shuffled[rand]=value});return shuffled},filter:nativeCall(arrayProto.filter)||function(obj,cb,ctx){var results=[];if(!core.is(obj,"array")||!core.is(cb,"function")){return results}for(var i=0,len=obj.length;i<len;i++){cb.call(ctx||obj,obj[i],i,obj)&&(results[results.length]=obj[i])}return results},include:function(arr,value,b){if(!core.is(arr,"array")){return value}if(typeof value==="function"){for(var i=0;i<arr.length;i++){if(value(arr[i],i)===true){return true}}return false}return core.array.indexOf(arr,value,b)>-1},indexOf:nativeCall(arrayProto.indexOf)||function(arr,value,b){for(var i=0,len=arr.length;i<len;i++){if((b!==false&&arr[i]===value)||(b===false&&arr[i]==value)){return i}}return -1},removeAt:function(value,index){if(!core.is(value,"array")){return value}value.splice(index,1);return value},remove:function(value,iter){if(!core.is(value,"array")){return value}if(typeof iter==="function"){for(var i=value.length,item;item=value[--i];){if(iter(item,i)===true){value=this.removeAt(value,i)}}return value}else{var index=this.indexOf(value,iter);if(index<0){return value}return this.removeAt(value,index)}},max:function(array){return Math.max.apply(Math,array)},min:function(array){return Math.min.apply(Math,array)},reverse:nativeCall(arrayProto.reverse)||function(array){var tmp=null,first,last;var length=array.length;for(first=0,last=length-1;first<length/2;first++,last--){tmp=array[first];array[first]=array[last];array[last]=tmp}return array},different:function(arr1,arr2){var newArr=[];core.each(arr1,function(value){if(core.array.indexOf(arr2,value)<0){newArr.push(value)}});core.each(arr2,function(value){if(core.array.indexOf(arr1,value)<0){newArr.push(value)}});return newArr},sum:function(arr){var total=0;core.each(arr,function(val){total+=(val|0)});return total}});core.addon("date",function(){var months="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),fullMonths="January,Febrary,March,April,May,June,July,Augst,September,October,November,December".split(",");function compare(d1,d2){if(!(d1 instanceof Date)){d1=core.date.parse(d1)}if(!(d2 instanceof Date)){d2=core.date.parse(d2)}return d1.getTime()>d2.getTime()?-1:(d1.getTime()===d2.getTime()?0:1)}return{MONTHS_NAME:months,MONTHS_FULLNAME:fullMonths,FORMAT:"yyyy.MM.dd",format:function(formatDate,formatString){if(formatDate===""||formatDate===null){return""}formatString||(formatString=this.FORMAT);if(core.is(formatDate,"number")){formatDate=new Date(formatDate)}else{if(core.is(formatDate,"string")){formatDate=this.parse(formatDate)}}if(formatDate instanceof Date){var yyyy=formatDate.getFullYear(),yy=yyyy.toString().substring(2),M=formatDate.getMonth()+1,MM=M<10?"0"+M:M,MMM=this.MONTHS_NAME[M-1],MMMM=this.MONTHS_FULLNAME[M-1],d=formatDate.getDate(),dd=d<10?"0"+d:d,h=formatDate.getHours(),hh=h<10?"0"+h:h,m=formatDate.getMinutes(),mm=m<10?"0"+m:m,s=formatDate.getSeconds(),ss=s<10?"0"+s:s,x=h>11?"PM":"AM",H=h%12;if(H===0){H=12}return formatString.replace(/yyyy/g,yyyy).replace(/yy/g,yy).replace(/MMMM/g,MMMM).replace(/MMM/g,MMM).replace(/MM/g,MM).replace(/M/g,M).replace(/dd/g,dd).replace(/d/g,d).replace(/hh/g,hh).replace(/h/g,h).replace(/mm/g,mm).replace(/m/g,m).replace(/ss/g,ss).replace(/s/g,s).replace(/!!!!/g,MMMM).replace(/!!!/g,MMM).replace(/H/g,H).replace(/x/g,x)}else{return""}},isValid:function(date){try{return !isNaN(this.parse(date).getTime())}catch(e){return false}},between:function(date,start,end){if(!date.getDate){date=core.date.parse(date)}if(!start.getDate){start=core.date.parse(start)}if(!end.getDate){end=core.date.parse(end)}return date.getTime()>=start.getTime()&&date.getTime()<=end.getTime()},compare:compare,equalsYMD:function(a,b){var ret=true;if(!a||!b){return false}if(!a.getDate){a=this.parse(a)}if(!b.getDate){b=this.parse(b)}each(["getFullYear","getMonth","getDate"],function(fn){ret=ret&&(a[fn]()===b[fn]());if(!ret){return false}});return ret},calcDate:function(date,type,format){date=this.parse(date);if(!date){return null}var m=type.match(/([-+]*)([0-9]*)([a-z]+)/i),g=m[1]==="-"?-1:1,d=(m[2]|0)*g;switch(m[3]){case"d":date.setDate(date.getDate()+d);break;case"w":date.setDate(date.getDate()+(d*7));break;case"M":var tDate=new Date(new Date(date.getFullYear(),(date.getMonth()+1)+d,1)-86400000);var tMaxDay=tDate.getDate();if(date.getDate()>tMaxDay){date=tDate}else{date.setMonth(date.getMonth()+d)}break;case"y":date.setFullYear(date.getFullYear()+d);break}if(format){return this.format(date,format==="format"?this.FORMAT:format)}return date},calc:function(){return this.calcDate.apply(this,[].slice.call(arguments))},parse:(function(){var isoExp=/^\s*(\d{4})(\d{2})(\d{2})(\d{2})?(\d{2})?(\d{2})?\s*$/;return function(dateStringInRange){var date,month,parts;if(dateStringInRange instanceof Date){return core.clone(dateStringInRange)}dateStringInRange=(dateStringInRange+"").replace(/[^\d]+/g,"");if(dateStringInRange.length!==8&&dateStringInRange.length!==14){return new Date(NaN)}if(dateStringInRange.length===14){date=new Date(dateStringInRange.substr(0,4)|0,(dateStringInRange.substr(4,2)|0)-1,dateStringInRange.substr(6,2)|0,dateStringInRange.substr(8,2)|0,dateStringInRange.substr(10,2)|0,dateStringInRange.substr(12,2)|0);if(!isNaN(date)){return date}}date=new Date(dateStringInRange);if(!isNaN(date)){return date}date=new Date(NaN);parts=isoExp.exec(dateStringInRange);if(parts){month=+parts[2];date.setFullYear(parts[1]|0,month-1,parts[3]|0);date.setHours(parts[4]|0);date.setMinutes(parts[5]|0);date.setSeconds(parts[6]|0);if(month!=date.getMonth()+1){date.setTime(NaN)}return date}return date}})(),monthDiff:function(d1,d2){d1=this.parse(d1);d2=this.parse(d2);var months;months=(d2.getFullYear()-d1.getFullYear())*12;months-=d1.getMonth()+1;months+=d2.getMonth();return months},daysInMonth:function(year,month){var dd=new Date(year|0,month|0,0);return dd.getDate()},splits:function(amount){var days,hours,mins,secs;amount=amount/1000;days=Math.floor(amount/86400),amount=amount%86400;hours=Math.floor(amount/3600),amount=amount%3600;mins=Math.floor(amount/60),amount=amount%60;secs=Math.floor(amount);return{days:days,hours:hours,mins:mins,secs:secs}},diff:function(t1,t2){if(!core.is(t1,"date")){t1=new Date(t1)}if(!core.is(t2,"date")){t2=new Date(t2)}var diff=t1.getTime()-t2.getTime(),ddiff=diff;diff=Math.abs(diff);var ms=diff%1000;diff/=1000;var s=Math.floor(diff%60);diff/=60;var m=Math.floor(diff%60);diff/=60;var h=Math.floor(diff%24);diff/=24;var d=Math.floor(diff);var w=Math.floor(diff/7);return{ms:ms,secs:s,mins:m,hours:h,days:d,weeks:w,diff:ddiff}},weekOfYear:(function(){var ms1d=1000*60*60*24,ms7d=7*ms1d;return function(date){var DC3=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()+3)/ms1d,AWN=Math.floor(DC3/7),Wyr=new Date(AWN*ms7d).getUTCFullYear();return AWN-Math.floor(Date.UTC(Wyr,0,7)/ms7d)+1}}()),isLeapYear:function(y){if(toString.call(y)==="[object Date]"){y=y.getUTCFullYear()}return((y%4===0)&&(y%100!==0))||(y%400===0)},add:function(date,interval,value){var d=new Date(date.getTime());if(!interval||value===0){return d}switch(interval){case"ms":d.setMilliseconds(d.getMilliseconds()+value);break;case"s":d.setSeconds(d.getSeconds()+value);break;case"m":d.setMinutes(d.getMinutes()+value);break;case"h":d.setHours(d.getHours()+value);break;case"d":d.setDate(d.getDate()+value);break;case"M":d.setMonth(d.getMonth()+value);break;case"y":d.setFullYear(d.getFullYear()+value);break}return d},max:function(a,b){return new Date(Math.max(this.parse(a),this.parse(b)))},min:function(a,b){return new Date(Math.min(this.parse(a),this.parse(b)))},normalize:function(h,M,s,ms){h=h||0;M=M||0;s=s||0;ms=ms||0;var d=0;if(ms>1000){s+=Math.floor(ms/1000);ms=ms%1000}if(s>60){M+=Math.floor(s/60);s=s%60}if(M>60){h+=Math.floor(M/60);M=M%60}if(h>24){d+=Math.floor(h/24);h=h%24}return{day:d,hour:h,min:M,sec:s,ms:ms}}}});core.addon("uri",{addParam:function(url,string){if(core.is(string,"object")){string=core.object.toQueryString(string)}if(!core.isEmpty(string)){return url+(url.indexOf("?")===-1?"?":"&")+string}return url},parseQuery:function(query){if(!query){return{}}if(query.length>0&&query.charAt(0)==="?"){query=query.substr(1)}var params=(query+"").split("&"),obj={},params_length=params.length,tmp="",i;for(i=0;i<params_length;i++){tmp=params[i].split("=");obj[decodeURIComponent(tmp[0])]=decodeURIComponent(tmp[1]).replace(/[+]/g," ")}return obj},parseUrl:(function(){var o={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};return function(str){if(str.length>2&&str[0]==="/"&&str[1]==="/"){str=window.location.protocol+str}var m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--){uri[o.key[i]]=m[i]||""}return uri}})(),removeHash:function(url){return url?url.replace(/#.*$/,""):url},getParam:function(name){var search=location.search,params;if(!search||search.indexOf(name)<0){return""}params=this.parseQuery(search);return params[name]||""}});core.addon("css3",function(){var _tmpDiv=core.tmpNode,_prefixes=["Webkit","Moz","O","ms",""],_style=_tmpDiv.style,_noReg=/^([0-9]+)[px]+$/,_vendor=(function(){var vendors=["t","webkitT","MozT","msT","OT"],transform,i=0,l=vendors.length;for(;i<l;i++){if(vendors[i]+"ransitionDuration" in _style&&vendors[i]+"ransform" in _style){return vendors[i].substr(0,vendors[i].length-1)}}return false})(),string=core.string;function prefixStyle(name,isHyppen){if(_vendor===false){return isHyppen?name.toLowerCase():name}if(_vendor===""){return isHyppen?name.toLowerCase():name}if(isHyppen){return"-"+_vendor.toLowerCase()+"-"+name[0].toLowerCase()+string.dasherize(name.substr(1))}return _vendor+string.capitalize(name)}return{support:_vendor!==false,support3D:(function(){var body=doc.body,docEl=doc.documentElement,docOverflow;if(!body){body=doc.createElement("body");body.fake=true;body.style.background="";body.style.overflow="hidden";body.style.padding="0 0 0 0";docEl.appendChild(body)}docOverflow=docEl.style.overflow;docEl.style.overflow="hidden";var parent=doc.createElement("div"),div=doc.createElement("div"),cssTranslate3dSupported;div.style.position="absolute";parent.appendChild(div);body.appendChild(parent);div.style[prefixStyle("transform")]="translate3d(20px, 0, 0)";cssTranslate3dSupported=($(div).position().left-div.offsetLeft==20);if(body.fake){body.parentNode.removeChild(body);docEl.offsetHeight;body=null}else{parent.parentNode.removeChild(parent)}docEl.style.overflow=docOverflow;return cssTranslate3dSupported})(),vendor:_vendor,has:function(name){var a=_prefixes.length;if(name in _style){return true}name=string.capitalize(name);while(a--){if(_prefixes[a]+name in _style){return true}}return false},position:(function(){var support=_vendor!==false;var transform=prefixStyle("transform");return support?function($el){var matrix=window.getComputedStyle?window.getComputedStyle($el[0],null):$el[0].currentStyle,x,y;if(!matrix[transform]||matrix[transform]==="none"){return{x:0,y:0}}matrix=matrix[transform].split(")")[0].split(", ");x=+(matrix[12]||matrix[4]||0);y=+(matrix[13]||matrix[5]||0);return{x:x,y:y}}:function($el){var matrix=$el[0].style,x,y;x=+matrix.left.replace(/[^-\d.]/g,"");y=+matrix.top.replace(/[^-\d.]/g,"");return{x:x,y:y}}})(),transform:prefixStyle("transform"),transitionTimingFunction:prefixStyle("transitionTimingFunction"),transitionDuration:prefixStyle("transitionDuration"),transitionDelay:prefixStyle("transitionDelay"),transformOrigin:prefixStyle("transformOrigin"),transition:prefixStyle("transition"),translateZ:prefixStyle("perspective") in _style?" translateZ(0)":"",transitionEnd:(function(){var names={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"};for(var name in names){if(core.tmpNode.style[name]!==undefined){return names[name]}}return"transitionend"})(),move:function($el,x,y,dur,cb){if(!dur&&core.browser.isBadAndroid){}var unitX=core.is(x,"number")?"px":"",unitY=core.is(y,"number")?"px":"",style=$el[0].style;style[this.transitionDuration]=dur+"s";style[this.transform]="translate("+x+unitX+", "+y+unitY+")"+this.translateZ;if(!$el.data("bindedEnd")&&cb){$el.data("bindedEnd",true).on(this.transitionEnd,function(){cb.call($el[0])})}},animate:function($el,x,y,dur,cb){var rfxnum=/^([+-]=)?([\d+-.]+)(.*)$/,xParts=rfxnum.exec(x),yParts=rfxnum.exec(y),that=this;$el.each(function(index,el){var $this=$(el),postion=scui.css3.position($this),startX=parseInt(postion.x,10),endX=parseFloat(xParts[2]),unitX=xParts[3]||"px",startY=parseInt(postion.y,10),endY=parseFloat(yParts[2]),unitY=yParts[3]||"px";if(unitX!=="px"){startX=(startX/$this.width())*100}if(xParts[1]){endX=((xParts[1]==="-="?-1:1)*endX)+startX}if(unitY!=="px"){startY=(startY/$this.height())*100}if(yParts[1]){endY=((yParts[1]==="-="?-1:1)*endY)+startY}$this.css(that.transitionDuration,dur+"s");$this.css(that.transitionTimingFunction,"ease-in-out");$this.css(that.transform,"translate("+(endX|0)+unitX+", "+(endY|0)+unitX+") translateZ(0px)");if(cb){$this.on(that.transitionEnd,function(){cb.call($el[0]);$this.off(that.transitionEnd)})}})},style:function($el,motion,dur,easing){$el.css(this.transition,motion);$el.css(this.transitionDuration,dur+"s");$el.css(this.transitionTimingFunction,easing)},prefix:prefixStyle}});core.addon("dom",{getEventPoint:function(ev,type){var e=ev.originalEvent||ev;if(type==="end"||ev.type==="touchend"){e=e.changedTouches&&e.changedTouches[0]||e}else{e=e.touches&&e.touches[0]||e}return{x:e.pageX||e.clientX,y:e.pageY||e.clientY}},getCaretPos:function(el){if(core.is(el.selectionStart,"number")){return{begin:el.selectionStart,end:el.selectionEnd}}var range=document.selection.createRange();if(range&&range.parentElement()===el){var inputRange=el.createTextRange(),endRange=el.createTextRange(),length=el.value.length;inputRange.moveToBookmark(range.getBookmark());endRange.collapse(false);if(inputRange.compareEndPoints("StartToEnd",endRange)>-1){return{begin:length,end:length}}return{begin:-inputRange.moveStart("character",-length),end:-inputRange.moveEnd("character",-length)}}return{begin:0,end:0}},setCaretPos:function(el,pos){if(!core.is(pos,"object")){pos={begin:pos,end:pos}}if(el.setSelectionRange){el.setSelectionRange(pos.begin,pos.end)}else{if(el.createTextRange){var range=el.createTextRange();range.collapse(true);range.moveEnd("character",pos.end);range.moveStart("character",pos.begin);range.select()}}},position:function(){return core.css3.position.apply(core.css3,[].slice.call(arguments,0))},move:core.css3.support?function(){core.css3.move.apply(core.css3,[].slice.call(arguments,0))}:function($el,x,y,dur,callback){var css={};if(typeof x!=="undefined"){css.left=x}if(typeof y!=="undfined"){css.top=y}if(!dur){$el.css(css);callback&&callback()}else{$el.stop(false,true).animate(css,dur,function(){callback&&callback.apply(this,[].slice.call(arguments,0))})}},contains:function(p,c,is){if(!p||!c){return false}if("contains" in p){return(p!==c&&p.contains(c))||(is===true&&p===c)}else{return(p.compareDocumentPosition(c)%16)||(is===true&&p===c)}},getMouseButton:function(e){var type="";if(e.which==null){type=(e.button<2)?"left":((e.button==4)?"middle":"right")}else{type=(e.which<2)?"left":((e.which==2)?"middle":"right")}return type}});core.addon("Cookie",{defaults:{path:""},set:function(name,value,options){if(!core.is(name,"string")){core.each(name,function(val,key){this.set(key,value,value)}.bind(this));return}options=core.extend({},options||{},this.defaults);var curCookie=name+"="+encodeURIComponent(value)+((options.expires)?"; expires="+(options.expires instanceof Date?options.expires.toGMTString():options.expires):"")+((options.path)?"; path="+options.path:"")+((options.domain)?"; domain="+options.domain:"")+((options.secure)?"; secure":"");doc.cookie=curCookie},get:function(name){var j,g,h,f;j=";"+doc.cookie.replace(/ /g,"")+";";g=";"+name+"=";h=j.indexOf(g);if(h!==-1){h+=g.length;f=j.indexOf(";",h);return decodeURIComponent(j.substr(h,f-h))}return""},remove:function(name){if(core.is(name,"string")){doc.cookie=name+"=;expires=Fri, 31 Dec 1987 23:59:59 GMT;"}else{core.each(name,function(val,key){this.remove(key)}.bind(this))}},setItem:function(name,val,sep){sep=sep||"|";val=val+"";var value=this.get(name),values=value?value.split(sep):[];if(!core.array.include(values,val)){values.push(val)}this.set.apply(this,[name,values.join(sep)].concat(arguments))},getItems:function(name){var val=this.get(name)||"";if(!$.trim(val)){return[]}return val.split("|")},removeItem:function(name,val,sep){sep=sep||"|";val=val+"";var value=this.get(name),values=value?value.split(sep):[];values=core.array.remove(values,val);this.set.apply(this,[name,values.join(sep)].concat(arguments))}});core.addon({getHost:function(){var loc=doc.location;return loc.protocol+"//"+loc.host},getPageUrl:function(){var loc=doc.location;return loc.protocol+"//"+loc.host+loc.pathname},browser:(function(){var detect={},win=context,na=win.navigator,ua=na.userAgent,lua=ua.toLowerCase(),match;detect.placeholder=supportPlaceholder;detect.isStrict=(typeof context=="undefined");detect.isRetina="devicePixelRatio" in window&&window.devicePixelRatio>1;detect.isAndroid=lua.indexOf("android")!==-1;detect.isBadAndroid=/Android /.test(na.appVersion)&&!(/Chrome\/\d/.test(na.appVersion));detect.isOpera=!!(win.opera&&win.opera.buildNumber);detect.isWebKit=/WebKit/.test(ua);detect.isTouch=!!("ontouchstart" in window);match=/(msie) ([\w.]+)/.exec(lua)||/(trident)(?:.*rv.?([\w.]+))?/.exec(lua)||["",null,-1];detect.isIE=!detect.isWebKit&&!detect.isOpera&&match[1]!==null;detect.version=detect.ieVersion=parseInt(match[2],10);detect.isOldIE=detect.isIE&&detect.version<9;detect.isWin=(na.appVersion.indexOf("Win")!=-1);detect.isMac=(ua.indexOf("Mac")!==-1);detect.isLinux=(na.appVersion.indexOf("Linux")!=-1);detect.is64Bit=(lua.indexOf("wow64")>-1||(na.platform==="Win64"&&lua.indexOf("x64")>-1));detect.isChrome=(ua.indexOf("Chrome")!==-1);detect.isGecko=(ua.indexOf("Firefox")!==-1);detect.isAir=((/adobeair/i).test(ua));detect.isIOS=/(iPad|iPhone)/.test(ua);detect.isSafari=!detect.isChrome&&(/Safari/).test(ua);detect.isIETri4=(detect.isIE&&ua.indexOf("Trident/4.0")!==-1);detect.msPointer=!!(na.msPointerEnabled&&na.msMaxTouchPoints&&!win.PointerEvent);detect.pointer=!!((win.PointerEvent&&na.pointerEnabled&&na.maxTouchPoints)||detect.msPointer);if(detect.isAndroid){detect.androidVersion=function(){var v=ua.match(/[a|A]ndroid[^\d]*(\d+).?(\d+)?.?(\d+)?/);if(!v){return -1}return[parseInt(v[1]|0,10),parseInt(v[2]|0,10),parseInt(v[3]|0,10)]}()}else{if(detect.isIOS){detect.iosVersion=function(){var v=ua.match(/OS (\d+)_?(\d+)?_?(\d+)?/);return[parseInt(v[1]|0,10),parseInt(v[2]|0,10),parseInt(v[3]|0,10)]}()}}detect.supportCanvas=!!document.createElement("canvas").getContext;detect.isMobile=isMobile||detect.isIOS||detect.isAndroid;return detect}()),delayRun:function(fn,time,scope){time||(time=250);var timeout=null;return function(){if(timeout){clearTimeout(timeout)}var args=arguments,me=this;timeout=setTimeout(function(){fn.apply(scope||me,args);timeout=null},time)}},toArray:function(value){try{return arraySlice.apply(value,arraySlice.call(arguments,1))}catch(e){}var ret=[];try{for(var i=0,len=value.length;i<len;i++){ret.push(value[i])}}catch(e){}return ret},getUniqId:function(len){len=len||32;var rdmString="";for(;rdmString.length<len;rdmString+=Math.random().toString(36).substr(2)){}return rdmString.substr(0,len)},nextSeq:(function(){var seq=0;return function(prefix){return(prefix||"")+(seq+=1)}}()),template:function(str,data){var src="var __src = [], each="+LIB_NAME+".each, escapeHTML="+LIB_NAME+'.string.escapeHTML; with(value||{}) { __src.push("';str=$.trim(str);src+=str.replace(/\r|\n|\t/g," ").replace(/\{\{(.*?)\}\}/g,function(a,b){return"{{"+b.replace(/"/g,"\t")+"}}"}).replace(/"/g,'\\"').replace(/\{\{each ([a-z]+) in ([a-zA-Z0-9\.]+)\}\}(.+)\{\{\/each\}\}/g,function(str,item,items,conts){return"{{each(value."+items+", function(item){ }}"+conts+" {{ }); }}"}).replace(/\{\{(.*?)\}\}/g,function(a,b){return"{{"+b.replace(/\t/g,'"')+"}}"}).replace(/\{\{=(.+?)\}\}/g,'", $1, "').replace(/\{\{-(.+?)\}\}/g,'", escapeHTML($1), "').replace(/(\{\{|\}\})/g,function(a,b){return b==="{{"?'");':'__src.push("'});src+='"); }; return __src.join("");';var f=new Function("value","data",src);if(data){return f(data)}return f},lpad:function(val,len,str){var v=new String(val),n=(len||2)-v.length,s=str||"0",p="",i;for(i=0;i<n;i+=1){p+=s}return p+v},createSequenceElement:function($container,format,length){var t,h=[],i;t='<img src="'+format+'" alt="" style="position: absolute; visibility:hidden;" />';h.push(t.replace(/#+/,function($0){return core.lpad(0,$0.length)}));$container.html(h.join(""));$container.children(":first").css({visibility:"visible"})},startSequenceElement:function($container,options){var $img=$container.find("img").eq(0),timer=$container.data("seq-timer"),opts=$.extend({fps:30,loop:true,first:false,reverse:false,loading:true,complete:null,onComplete:null},options),style=($container.data("position"))?$container.data("position"):"",t='<img src="'+$container.data("imagePattern")+'" alt="" style="position: absolute; visibility:hidden; '+style+'" />',h=[],max=parseInt($container.data("imageMax"),10),i,timerFnc,startFnc,$els=$container.children(),length=$els.length,index=opts.first?0:$els.filter(":visible:first").index();timerFnc=function(){if(!opts.loop&&opts.fps===0){$els.css({visibility:"hidden"}).eq(opts.reverse?0:max-1).css({visibility:"visible"})}else{timer=setTimeout(function(){if(opts.reverse){$els.eq(max).css({visibility:"hidden"}).end().eq(max=--max%length).css({visibility:"visible"})}else{$els.eq(index).css({visibility:"hidden"}).end().eq(index=++index%length).css({visibility:"visible"})}if(!opts.loop&&(index===length-1||max===0)){core.stopSequenceElement($container);if(opts.complete){opts.complete.apply($container[0])}if(typeof opts.onComplete==="function"){opts.onComplete()}if($container.data("sequnceType")==="type1"&&$container.data("imageMax2")>0){$container.data("sequnceType","type2");$container.data("imagePattern",$container.data("imagePattern2")).data("imageMax",$container.data("imageMax2"));$container.children(":last").css({visibility:"hidden"}).end().children(":first").attr("src",$container.data("imagePattern2").replace(/#+/,function($0){return core.lpad(0,$0.length)})).css({visibility:"visible"});core.createSequenceElement($container,$container.data("imagePattern"),$container.data("imageMax"))}}else{timerFnc()}},Math.floor(1000/opts.fps))}};startFnc=function(){if(!timer){$els=$container.children();length=$els.length;index=opts.first?0:$els.filter(":visible:first").index();if(opts.reverse){$container.find("img").css({visibility:"hidden"}).end().children(":last").css({visibility:"visible"})}else{$container.find("img").css({visibility:"hidden"}).end().children(":first").css({visibility:"visible"})}timerFnc();$container.data("seq-timer",timer)}};for(i=0;i<max;i+=1){h.push(t.replace(/#+/,function($0){return core.lpad(i,$0.length)}))}$container.html(h.join(""));$container.children(":first").css({visibility:"visible"});core.util.waitImageLoad($container.find("img")).done(function(){startFnc()})},stopSequenceElement:function($container){var timer=$container.data("seq-timer");if(timer){clearTimeout(timer);$container.data("seq-timer",null)}}});(function(){var isA=function(a,b){return a instanceof (b||Array)},doc=document,aliases={},bd=doc.getElementsByTagName("body")[0]||doc.documentElement,appendElmt=function(type,attrs,cb){var e=doc.createElement(type),i;if(cb&&isA(cb,Function)){if(e.readyState){e.onreadystatechange=function(){if(e.readyState==="loaded"||e.readyState==="complete"){e.onreadystatechange=null;cb()}}}else{e.onload=cb}}for(i in attrs){attrs[i]&&(e.setAttribute(i,attrs[i]))}bd.appendChild(e)},load=function(url,cb){if(isA(url)){for(var i=0;i<url.length;i++){loader.load(url[i])}cb&&url.push(cb);return loader.load.apply(loader,url)}if(url.match(/\.css\b/)){return loader.loadcss(url,cb)}return loader.loadjs(url,cb)},loaded={},loader={urlParse:function(pUrl,type){var parts={},url,ver,fn=type==="js"?core.importJs:core.importCss;url=pUrl.replace(/\?(.*)$/g,function(m,a){if(a&&a.indexOf("ver=")>=0){parts.ver=a.match(/[\?|&]?ver=([a-z0-9]*)/)[1]}return""});aliases[url]&&(url=aliases[url]);ver=parts.ver||fn.ver;if(url.toLowerCase().indexOf("."+type)<0){url+="."+type}if(url.substr(0,1)!=="/"){url=fn.baseUrl+url}parts.u=url;parts.full=url+(ver?"?ver="+ver:"");return parts},loadjs:function(url,cb){var parts=loader.urlParse(url,"js");url=parts.u;if(loaded[url]===true){cb&&cb();return loader}else{if(loaded[url]!==undefined){if(cb){loaded[url]=(function(ocb,cb){return function(){ocb&&ocb();cb&&cb()}})(loaded[url],cb)}return loader}}loaded[url]=(function(cb){return function(){loaded[url]=true;cb&&cb()}})(cb);cb=function(){loaded[url]()};if(core.importJs.isEval){$.ajax({url:parts.full,cache:true}).done(function(jsstring){eval(jsstring);cb()})}else{appendElmt("script",{type:"text/javascript","data-import":"true",src:parts.full},cb)}return loader},loadcss:function(url,cb){var parts=loader.urlParse(url,"css");url=parts.u;loaded[url]||appendElmt("link",{type:"text/css",rel:"stylesheet","data-import":"true",href:parts.full});loaded[url]=true;cb&&cb();return loader},load:function(){var argv=arguments,argc=argv.length;if(argc===1&&isA(argv[0],Function)){argv[0]();return loader}load.call(loader,argv[0],argc<=1?undefined:function(){loader.load.apply(loader,[].slice.call(argv,1))});return loader}};var scripts=doc.getElementsByTagName("script"),links=doc.getElementsByTagName("link");var detectLoaded=function(){var i,l,url;for(i=0,l=scripts.length;i<l;i++){if(scripts[i].getAttribute("data-import")){continue}(url=scripts[i].getAttribute("src"))&&(loaded[url.replace(/\?.*$/,"")]=true)}for(i=0,l=links.length;i<l;i++){if(links[i].getAttribute("data-import")){continue}(links[i].rel==="stylesheet"||links[i].type==="text/css")&&(loaded[links[i].getAttribute("href").replace(/\?.*$/,"")]=true)}};detectLoaded();$(function(){detectLoaded()});var importResource=function(type){return function(files,cb){var defer=$.Deferred();loader.load(files,function(){defer.resolve();if($.isReady){cb&&cb()}else{cb&&$(function(){cb()})}});return defer.promise()}};core.importJs=importResource("js");core.importCss=importResource("css");core.importJs.baseUrl=core.importCss.baseUrl="";core.importJs.ver=core.importCss.ver="";core.importJs.isEval=false;core.importJs.define=function(src){if(!/\.js$/.test(src)){src+=".js"}src=core.importJs.baseUrl.replace(/\/$/,"")+("/"+src).replace(/\/{2,}/g,"/");loaded[src]=true};core.importJs.addAliases=core.importCss.addAliases=function(a){if(typeof arguments[0]==="string"){aliases[arguments[0]]=arguments[1]}else{for(var i in a){aliases[i]=isA(a[i])?a[i].slice(0):a[i]}}}})();(function(){var F=function(){},ignoreNames=["superclass","members","statics","hooks"];function array_indexOf(arr,value){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(arr,value)}else{for(var i=-1,item;item=arr[++i];){if(item==value){return i}}return -1}}function wrap(k,fn,supr){return function(){var tmp=this.supr,ret;this.supr=supr.prototype[k];ret=undefined;try{ret=fn.apply(this,arguments)}finally{this.supr=tmp}return ret}}function inherits(what,o,supr){each(o,function(v,k){what[k]=isFunction(v)&&isFunction(supr.prototype[k])?wrap(k,v,supr):v})}function classExtend(attr,c){var supr=c?(attr.$extend||Object):this,statics,mixins,singleton,instance,hooks;if(core.is(attr,"function")){attr=attr()}singleton=attr.$singleton||false;statics=attr.$statics||false;mixins=attr.$mixins||false;hooks=attr.$hooks||false;!attr.initialize&&(attr.initialize=supr.prototype.initialize||function(){});function ctor(){if(singleton&&instance){return instance}else{instance=this}var args=arraySlice.call(arguments),me=this,ctr=me.constructor;if(me.initialize){me.initialize.apply(this,args)}else{supr.prototype.initialize&&supr.prototype.initialize.apply(me,args)}if(ctr.hooks){if(!ctr.hooks.inited){ctr.hooks.init&&each(ctr.hooks.init,function(fn){fn.call(me)});ctr.hooks.inited=true}ctr.hooks.create&&each(ctr.hooks.create,function(fn){fn.call(me)})}}function TypeClass(){if(!(this instanceof TypeClass)){}ctor.apply(this,arguments)}F.prototype=supr.prototype;TypeClass.prototype=new F;TypeClass.prototype.constructor=TypeClass;TypeClass.superclass=supr.prototype;TypeClass.extend=classExtend;TypeClass.hooks={init:[],create:[]};extend(true,TypeClass.hooks,supr.hooks);hooks&&each(hooks,function(name,fn){TypeClass.hooks(name,fn)});if(singleton){TypeClass.getInstance=function(){var arg=arguments,len=arg.length;if(!instance){switch(true){case !len:instance=new TypeClass;break;case len===1:instance=new TypeClass(arg[0]);break;case len===2:instance=new TypeClass(arg[0],arg[1]);break;default:instance=new TypeClass(arg[0],arg[1],arg[2]);break}}return instance}}TypeClass.prototype.suprMethod=function(name){var args=arraySlice.call(arguments,1);return supr.prototype[name].apply(this,args)};TypeClass.mixins=function(o){var me=this;if(!o.push){o=[o]}var proto=me.prototype;each(o,function(mixObj,i){if(!mixObj){return}each(mixObj,function(fn,key){if(key==="build"&&me.hooks){me.hooks.init.push(fn)}else{if(key==="create"&&me.hooks){me.hooks.create.push(fn)}else{proto[key]=fn}}})})};mixins&&TypeClass.mixins.call(TypeClass,mixins);TypeClass.members=function(o){inherits(this.prototype,o,supr)};attr&&TypeClass.members.call(TypeClass,attr);TypeClass.statics=function(o){o=o||{};for(var k in o){if(array_indexOf(ignoreNames,k)<0){this[k]=o[k]}}return this};TypeClass.statics.call(TypeClass,supr);statics&&TypeClass.statics.call(TypeClass,statics);return TypeClass}var BaseClass=function(){};BaseClass.prototype.initialize=function(){};BaseClass.prototype.release=function(){};BaseClass.prototype.proxy=function(fn){var me=this;if(typeof fn==="string"){fn=me[fn]}return function(){return fn.apply(me,arguments)}};BaseClass.extend=classExtend;core.Class=function(attr){return classExtend.apply(this,[attr,true])};return core.BaseClass=BaseClass})();core.addon("Env",{configs:{},get:function(name,def){var root=this.configs,names=name.split("."),pair=root;for(var i=0,len=names.length;i<len;i++){if(!(pair=pair[names[i]])){return def}}return pair},set:function(name,value){var root=this.configs,names=name.split("."),len=names.length,last=len-1,pair=root;for(var i=0;i<last;i++){pair=pair[names[i]]||(pair[names[i]]={})}return(pair[names[last]]=value)}});core.addon("Listener",function(){var Listener={build:function(obj){scui.extend(obj,scui.Listener).init()},init:function(){this._listeners=$(this)},on:function(){var lsn=this._listeners;lsn.on.apply(lsn,arguments);return this},once:function(){var lsn=this._listeners;lsn.once.apply(lsn,arguments);return this},off:function(){var lsn=this._listeners;lsn.off.apply(lsn,arguments);return this},trigger:function(){var lsn=this._listeners;lsn.trigger.apply(lsn,arguments);return this}};return Listener});core.addon("PubSub",function(){var PubSub=$(window);var tmp={on:function(name,handler){return this},off:function(name,handler){return this},trigger:function(name,data){return this}};return PubSub});core.EventListener={on:function(name,cb){if(!this._events){this._events={}}if(!this._events[name]){this._events[name]=$.Callbacks()}this._events[name].add(cb)},off:function(name,cb){if(!this._events){return}if(!this._events[name]){return}if(cb){this._events[name].remove(cb)}else{this._events[name].empty()}},trigger:function(name){if(!this._events){return}if(!this._events[name]){return}this._events[name].fire.apply(this,[].slice.call(arguments,1))}}})(jQuery);


(function(m,i,h){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){window.setTimeout(r,1000/60)};var q=document.createElement("div").style;var k=(function(){var u=["t","webkitT","MozT","msT","OT"],s,t=0,r=u.length;for(;t<r;t++){s=u[t]+"ransform";if(s in q){return u[t].substr(0,u[t].length-1)}}return false})();function p(r){if(k===false){return false}if(k===""){return r}return k+r.charAt(0).toUpperCase()+r.substr(1)}var f=p("transform");var g=Date.now||function g(){return new Date().getTime()};var j=function(x,t,u,r,y,z){var s=x-t,v=Math.abs(s)/u,A,w;z=z===h?0.0006:z;A=x+(v*v)/(2*z)*(s<0?-1:1);w=v/z;if(A<r){A=y?r-(y/2.5*(v/8)):r;s=Math.abs(A-x);w=s/v}else{if(A>0){A=y?y/2.5*(v/8):0;s=Math.abs(x)+A;w=s/v}}return{destination:Math.round(A),duration:w}};var n={hasTransform:f!==false,hasPerspective:p("perspective") in q,hasTouch:"ontouchstart" in window,hasPointer:window.PointerEvent||window.MSPointerEvent,hasTransition:p("transition") in q};var o={quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(r){return Math.sqrt(1-(--r*r))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(s){var r=4;return(s=s-1)*s*((r+1)*s+r)+1}},bounce:{style:"",fn:function(r){if((r/=1)<(1/2.75)){return 7.5625*r*r}else{if(r<(2/2.75)){return 7.5625*(r-=(1.5/2.75))*r+0.75}else{if(r<(2.5/2.75)){return 7.5625*(r-=(2.25/2.75))*r+0.9375}else{return 7.5625*(r-=(2.625/2.75))*r+0.984375}}}}},elastic:{style:"",fn:function(r){var s=0.22,t=0.4;if(r===0){return 0}if(r==1){return 1}return(t*Math.pow(2,-10*r)*Math.sin((r-s/4)*(2*Math.PI)/s)+1)}}};var c={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3};function l(r){if(!r.which&&r.button){if(r.button&1){return 1}else{if(r.button&4){return 2}else{if(r.button&2){return 3}}}}return r.button}var a={transform:f,transitionTimingFunction:p("transitionTimingFunction"),transitionDuration:p("transitionDuration"),transitionDelay:p("transitionDelay"),transformOrigin:p("transformOrigin")};var b=i("SmoothScroll",{bindjQuery:"smoothScroll",defaults:{startX:0,startY:0,scrollX:false,scrollY:true,directionLockThreshold:5,scrollByWheel:true,scrollType:"style",mouseWheelSpeed:20,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|SELECT)$/i},HWCompositing:true,useTransition:true,useTransform:true,resizeRefresh:false,resizePolling:60,dragable:true,snap:""},selectors:{scroller:".ui_scroller"},initialize:function(s,r){var u=this,t;if(u.supr(s,r)===false){return}if(!u.$scroller[0]){return}t=u.options;u.$wrapper=u.$el;u.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!(/Chrome\/\d/.test(window.navigator.appVersion));u.translateZ=t.HWCompositing&&n.hasPerspective?" translateZ(0)":"";t.useTransition=n.hasTransition&&t.useTransition&&t.scrollType==="style";t.useTransform=n.hasTransform&&t.useTransform;t.eventPassthrough=t.eventPassthrough===true?"vertical":t.eventPassthrough;t.preventDefault=!t.eventPassthrough&&t.preventDefault;t.scrollY=t.eventPassthrough=="vertical"?false:t.scrollY;t.scrollX=t.eventPassthrough=="horizontal"?false:t.scrollX;t.freeScroll=t.freeScroll&&!t.eventPassthrough;t.directionLockThreshold=t.eventPassthrough?0:t.directionLockThreshold;t.bounceEasing=typeof t.bounceEasing=="string"?o[t.bounceEasing]||o.circular:t.bounceEasing;t.invertWheelDirection=t.invertWheelDirection?-1:1;u._startX=0;u._startY=0;u.x=0;u.y=0;u.directionX=0;u.directionY=0;u.scrollerStyle=u.$scroller[0].style;if(t.snap){u.$snapItems=u.$(t.snap)}u._init();u.refresh();u.scrollTo(t.startX,t.startY);u.enable()},enable:function(){this.isEnabled=true},setDisabled:function(r){this.isEnabled=!r},_init:function(){this._initEvents()},_initEvents:function(){var r=this;r._handle(r.$wrapper,"mousedown");r._handle(r.$wrapper,"touchstart");r._handle(r.$wrapper,"selectstart");r._handle(r.$wrapper,"dragstart");r._handle(r.$wrapper,"click");if(r.options.useTransition){r._handle(r.$scroller,"transitionend");r._handle(r.$scroller,"webkitTransitionEnd");r._handle(r.$scroller,"oTransitionEnd");r._handle(r.$scroller,"MSTransitionEnd")}if(r.options.scrollByWheel){r._initWheel()}if(r.options.resizeRefresh){m(window).on("resize."+r.cid,function(){r.refresh()})}},_initWheel:function(){var r=this;r._handle(r.$wrapper,"wheel");r._handle(r.$wrapper,"mousewheel");r._handle(r.$wrapper,"DOMMouseScroll")},_wheel:function(w){var t=this;if(!t.isEnabled){return}w.preventDefault?w.preventDefault():w.returnValue=false;w.stopPropagation?w.stopPropagation():w.cancalBubble=true;var u,s,x,v;if(t.wheelTimeout===h){t._startX=t.x;t._startY=t.y;var r=m.Event("smoothscrollstart");t.triggerHandler(r,{x:t.x,y:t.y});if(r.isDefaultPrevented()){return}}clearTimeout(t.wheelTimeout);t.wheelTimeout=setTimeout(function(){t._triggerEnd();t.wheelTimeout=h},400);w=w.originalEvent||w;if("deltaX" in w){if(w.deltaMode===1){u=-w.deltaX*t.options.mouseWheelSpeed;s=-w.deltaY*t.options.mouseWheelSpeed}else{u=-w.deltaX;s=-w.deltaY}}else{if("wheelDeltaX" in w){u=w.wheelDeltaX/120*t.options.mouseWheelSpeed;s=w.wheelDeltaY/120*t.options.mouseWheelSpeed}else{if("wheelDelta" in w){u=s=w.wheelDelta/120*t.options.mouseWheelSpeed}else{if("detail" in w){u=s=-w.detail/3*t.options.mouseWheelSpeed}else{return}}}}u*=t.options.invertWheelDirection;s*=t.options.invertWheelDirection;if(!t.hasVerticalScroll){u=s;s=0}x=t.x+Math.round(t.hasHorizontalScroll?u:0);v=t.y+Math.round(t.hasVerticalScroll?s:0);if(x>0){x=0}else{if(x<t.maxScrollX){x=t.maxScrollX}}if(v>0){v=0}else{if(v<t.maxScrollY){v=t.maxScrollY}}t.scrollTo(x,v,0)},_handle:function(t,s,r){var u=this;if(r!==false){t.on(s+"."+u.cid,u.handleEvent.bind(u))}else{t.off(s+"."+u.cid)}},handleEvent:function(s){var r=this;switch(s.type){case"mousedown":case"touchstart":if(r.moved){s.preventDefault()}r._start(s);break;case"selectstart":case"dragstart":s.preventDefault?s.preventDefault:s.returnValue=false;break;case"mousemove":case"touchmove":r._move(s);break;case"mouseup":case"mousecancel":case"touchend":case"touchcancel":r._end(s);break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":r._transitionEnd(s);break;case"wheel":case"mousewheel":case"DOMMouseScroll":r._wheel(s);break;case"click":if(r.moved){s.preventDefault();s.stopPropagation()}else{r._click(s)}break}},getPosition:function(){var r,t;if(this.options.scrollType==="style"){var s=i.dom.position(this.$scroller);r=s.x;t=s.y}else{if(this.options.scrollType==="scroll"){r=-this.$scroller.parent().scrollLeft();t=-this.$scroller.parent().scrollTop()}}return{x:r,y:t}},_animate:function(A,z,u,r){var y=this,w=this.x,v=this.y,s=g(),x=s+u;function t(){var B=g(),D,C,E;if(B>=x){y.isAnimating=false;y._translate(A,z);if(y.options.bounce&&!y.resetPosition(y.options.bounceTime)){y._triggerEnd()}return}B=(B-s)/u;E=r(B);D=(A-w)*E+w;C=(z-v)*E+v;D=isNaN(D)?0:D;C=isNaN(C)?0:C;y._translate(D,C);if(y.isAnimating){d(t)}}this.isAnimating=true;t()},_transitionTime:function(r){if(!this.options.useTransition){return}r=r||0;this.scrollerStyle[a.transitionDuration]=r+"ms"},_transitionTimingFunction:function(r){if(!this.options.useTransition){return}this.scrollerStyle[a.transitionTimingFunction]=r},_translate:function(r,u){var t=this;var s=m.Event("smoothscrollmove");t.triggerHandler(s,{x:r,y:u});if(s.isDefaultPrevented()){return}if(t.options.scrollType==="style"){if(t.options.useTransform){t.scrollerStyle[a.transform]="translate("+r+"px,"+u+"px)"+t.translateZ}else{r=Math.round(r);u=Math.round(u);t.scrollerStyle.left=r+"px";t.scrollerStyle.top=u+"px"}}else{if(t.options.scrollType==="scroll"){t.$scroller.parent().scrollLeft(-r);t.$scroller.parent().scrollTop(-u)}}t.scrollSizeX=t.x-r;t.scrollSizeY=t.y-u;t.x=r;t.y=u},resetPosition:function(t){var s=this,r=s.x,u=s.y;t=t||0;if(!s.hasHorizontalScroll||s.x>0){r=0}else{if(s.x<s.maxScrollX){r=s.maxScrollX}}if(!s.hasVerticalScroll||s.y>0){u=0}else{if(s.y<s.maxScrollY){u=s.maxScrollY}}if(r==s.x&&u==s.y){return false}s.scrollTo(r,u,t,s.options.bounceEasing);return true},scrollPrev:function(s,u,w){var t=this,r=0,v=0;if(s==="x"){r=Math.min(0,t.x+t.wrapperWidth)}else{v=Math.min(0,t.y+t.wrapperHeight)}t.scrollTo(r,v,u,w)},scrollNext:function(s,u,w){var t=this,r=0,v=0;if(s==="x"){r=Math.max(t.maxScrollX,t.x-t.wrapperWidth)}else{v=Math.max(t.maxScrollY,t.y-t.wrapperHeight)}t.scrollTo(r,v,u,w)},scrollTo:function(r,v,t,u){var s=this;u=u||o.circular;if(typeof r==="string"){if(/^-=/.test(r)){r=s.x-parseInt(r.substr(2),10)}else{if(/^\+=/.test(r)){r=s.x+parseInt(r.substr(2))}}}if(typeof v==="string"){if(/^-=/.test(v)){v=s.y-parseInt(v.substr(2),10)}else{if(/^\+=/.test(v)){v=s.y+parseInt(v.substr(2),10)}}}if(!s.options.momentum){r=Math.max(s.maxScrollX,Math.min(r,0));v=Math.max(s.maxScrollY,Math.min(v,0))}s.isInTransition=s.options.useTransition&&t>0;if(!t||(s.options.useTransition&&u.style)){s._transitionTimingFunction(u.style);s._transitionTime(t);s._translate(r,v)}else{s._animate(r,v,t,u.fn)}},scrollToElement:function(s,u,r,x,w){var t=this;s=s.nodeType?s:t.$scroller.find(s);if(!s){return}var v=m(s).position();v.left*=-1;v.top*=-1;v.left=v.left>0?0:v.left<t.maxScrollX?t.maxScrollX:v.left;v.top=v.top>0?0:v.top<t.maxScrollY?t.maxScrollY:v.top;u=u===h||u===null||u==="auto"?Math.max(Math.abs(t.x-v.left),Math.abs(t.y-v.top)):u;t.scrollTo(v.left,v.top,u,w)},_isDragable:function(r){if(i.browser.isTouch){return true}if(r&&r.tagName&&this.options.preventDefaultException.tagName.test(r.tagName)){return false}else{return true}},_click:function(t){var s=this,r=i.dom.getEventPoint(t);if(!(s.downX===r.x&&s.downY===r.y)){t.preventDefault?t.preventDefault():t.returnValue=false;t.stopPropagation?t.stopPropagation():t.cancalBubble=true}},_start:function(t){var s=this;var u=t.originalEvent||t;if(c[u.type]!=1){if(i.dom.getMouseButton(u)!=="left"){return}}if((!s.isEnabled||(s.initiated&&c[u.type]!==s.initiated))&&!m(t.target).hasClass("input_del")){return}var w=m(document),r=i.dom.getEventPoint(u),v;if(!s._isDragable(t.target)||!s.options.dragable){return}s._handle(w,"mousemove");s._handle(w,"touchmove");s._handle(w,"touchend");s._handle(w,"mouseup");s._handle(w,"mousecancel");s._handle(w,"tocuchcancel");s.initiated=c[u.type];s.moved=false;s.distX=0;s.distY=0;s.directionX=0;s.directionY=0;s.directionLocked=0;s._transitionTime();s.startTime=g();if(s.options.useTransition&&s.isInTransition){s.isInTransition=false;v=s.getPosition();s._translate(Math.round(v.x),Math.round(v.y));s._triggerEnd()}else{if(!s.options.useTransition&&s.isAnimating){s.isAnimating=false;s._triggerEnd()}}s.startX=s.x;s.startY=s.y;s.absStartX=s.x;s.absStartY=s.y;s.pointX=s.downX=r.x;s.pointY=s.downY=r.y},_move:function(w){var y=this;w=w.originalEvent||w;if(!y.isEnabled||c[w.type]!==y.initiated){return}if(y.options.preventDefault){w.preventDefault?w.preventDefault():w.defaultValue=false}var A=i.dom.getEventPoint(w),t=A.x-y.pointX,s=A.y-y.pointY,x=g(),r,B,v,u;y.pointX=A.x;y.pointY=A.y;y.distX+=t;y.distY+=s;v=Math.abs(y.distX);u=Math.abs(y.distY);if(x-y.endTime>300&&(v<10&&u<10)){return}if(!y.directionLocked&&!y.options.freeScroll){if(v>u+y.options.directionLockThreshold){y.directionLocked="h"}else{if(u>=v+y.options.directionLockThreshold){y.directionLocked="v"}else{y.directionLocked="n"}}}if(y.directionLocked=="h"){if(y.options.eventPassthrough=="vertical"){w.preventDefault?w.preventDefault():w.defaultValue=false}else{if(y.options.eventPassthrough=="horizontal"){y.initiated=false;return}}s=0}else{if(y.directionLocked=="v"){if(y.options.eventPassthrough=="horizontal"){w.preventDefault?w.preventDefault():w.defaultValue=false}else{if(y.options.eventPassthrough=="vertical"){y.initiated=false;return}}t=0}}t=y.hasHorizontalScroll?t:0;s=y.hasVerticalScroll?s:0;r=y.x+t;B=y.y+s;if(r>0||r<y.maxScrollX){r=y.options.bounce?y.x+t/3:r>0?0:y.maxScrollX}if(B>0||B<y.maxScrollY){B=y.options.bounce?y.y+s/3:B>0?0:y.maxScrollY}y.directionX=t>0?-1:t<0?1:0;y.directionY=s>0?-1:s<0?1:0;if(!y.moved){y._startX=y.x;y._startY=y.y;var z=m.Event("smoothscrollstart");y.triggerHandler(z,{x:y.x,y:y.y});if(z.isDefaultPrevented()){return}}y.moved=true;y._translate(r,B);if(x-y.startTime>300){y.startTime=x;y.startX=y.x;y.startY=y.y}},_end:function(x){var z=this;if(!z.isEnabled||c[x.type]!==z.initiated){return}var w=m(document),t,s,v=g()-z.startTime,r=Math.round(z.x),A=Math.round(z.y),u=0,y="";w.off("."+z.cid);z.isInTransition=0;z.initiated=0;z.endTime=g();if(z.options.bounce&&z.resetPosition(z.options.bounceTime)){return}z.scrollTo(r,A);if(!z.moved){return}if(z.options.momentum&&v<300){t=z.hasHorizontalScroll?j(z.x,z.startX,v,z.maxScrollX,z.options.bounce?z.wrapperWidth:0,z.options.deceleration):{destination:r,duration:0};s=z.hasVerticalScroll?j(z.y,z.startY,v,z.maxScrollY,z.options.bounce?z.wrapperHeight:0,z.options.deceleration):{destination:A,duration:0};r=t.destination;A=s.destination;u=Math.max(t.duration,s.duration);z.isInTransition=1}if(r!=z.x||A!=z.y){if(r>0||r<z.maxScrollX||A>0||A<z.maxScrollY){y=o.quadratic}z.scrollTo(r,A,u,y);return}z._triggerEnd()},refresh:function(){var r=this;r.wrapperWidth=r.options.getWrapperWidth?r.options.getWrapperWidth():r.$wrapper.width();r.wrapperHeight=r.options.getWrapperHeight?r.options.getWrapperHeight():r.$wrapper.height();r.scrollerWidth=r.options.getScrollerWidth?r.options.getScrollerWidth():r.$scroller.width();r.scrollerHeight=r.options.getScrollerHeight?r.options.getScrollerHeight():r.$scroller.height();r.maxScrollX=r.wrapperWidth-r.scrollerWidth;r.maxScrollY=r.wrapperHeight-r.scrollerHeight;r.hasHorizontalScroll=r.options.scrollX&&r.maxScrollX<0;r.hasVerticalScroll=r.options.scrollY&&r.maxScrollY<0;if(!r.hasHorizontalScroll){r.maxScrollX=0;r.scrollerWidth=r.wrapperWidth}if(!r.hasVerticalScroll){r.maxScrollY=0;r.scrollerHeight=r.wrapperHeight}r.endTime=0;r.directionX=0;r.directionY=0;r.resetPosition();r.options.snap&&r._refreshSnapPos()},_refreshSnapPos:function(){var r=this;if(!r.options.snap){return}r.snapItemsPos=[];r.$snapItems.each(function(){r.snapItemsPos.push(m(this).position())})},_transitionEnd:function(s){var r=this;if(s.target!=r.$scroller[0]||!r.isInTransition){return}r._transitionTime();if(r.options.bounce&&!r.resetPosition(r.options.bounceTime)){r.isInTransition=false;this._triggerEnd()}},_snap:function(){var s=this;if(!s.options.snap){return}if(s._isSnap){s._isSnap=false}else{if(s.maxScrollX!=s.x){var r=s._startX-s.x,u=0,t=false;s._isSnap=true;r&&i.each(s.snapItemsPos,function(v){var w=v.left;if(r>0){if(w>Math.abs(s.x)){t=true;s._animate(-w,0,200,o.circular.fn);return false}}else{if(r<0){if(w>Math.abs(s.x)){t=true;s._animate(-u,0,200,o.circular.fn);return false}}}u=w});if(t){return true}}}s._isSnap=false},_triggerEnd:function(){var r=this;r.moved=false;if(r.options.snap&&r._snap()===true){return}r.triggerHandler("smoothscrollend",{x:r.x,y:r.y,dir:{x:r._startX-r.x,y:r._startY-r.y},wrapWidth:r.wrapperWidth,wrapHeight:r.wrapperHeight,scrollWidth:r.scrollerWidth,scrollHeight:r.scrollerHeight})},getCurrentX:function(){return this.x},getCurrentY:function(){return this.y},getMaxScrollX:function(){return this.maxScrollX},getMaxScrollY:function(){return this.maxScrollY}});if(typeof define==="function"&&define.amd){define([],function(){return b})}i.importJs.define("smooth-scroll",b)})(jQuery,window[LIB_NAME]);
